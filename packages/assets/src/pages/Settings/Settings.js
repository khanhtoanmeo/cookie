import React, {useState} from 'react';
import {
  Card,
  Layout,
  Page,
  Stack,
  Icon,
  TextStyle,
  FormLayout,
  TextField,
  Checkbox,
  DropZone,
  Label
} from '@shopify/polaris';
import ThemeSelection from '../../components/ThemeSelection/ThemeSelection';
import {themes} from '../../const/themes';
import {DesktopMajor} from '@shopify/polaris-icons';
import PreviewPhone from '../../components/PreviewPhone/PreviewPhone';
import './Settings.scss';
import CookieIcon from '../../components/Icons/CookieIcon';

/**
 * A sample page generated by Avada
 *
 * @param  props
 * @return {React.FunctionComponent}
 */
export default function Settings(props) {
  const themesHalfLength = Math.ceil(themes.length / 2);
  const [selected, setSelected] = useState(themes[0]);

  function handleThemeSelection(title) {
    setSelected(themes.find(theme => theme.title === title));
  }

  return (
    <Page breadcrumbs={[{content: 'Back', url: '/'}]} title="Settings">
      <Layout>
        <Layout.Section>
          <Card title="Preset">
            <Card.Section>
              <Stack>
                <Stack.Item fill>
                  {themes.slice(0, themesHalfLength).map(theme => (
                    <Stack key={theme.title}>
                      <Stack.Item fill>
                        <ThemeSelection
                          {...theme}
                          selected={selected}
                          onSelect={handleThemeSelection}
                        />
                      </Stack.Item>
                    </Stack>
                  ))}
                </Stack.Item>
                <Stack.Item fill>
                  {themes.slice(themesHalfLength, themes.length).map(theme => (
                    <Stack key={theme.title}>
                      <Stack.Item fill>
                        <ThemeSelection
                          {...theme}
                          selected={selected}
                          onSelect={handleThemeSelection}
                        />
                      </Stack.Item>
                    </Stack>
                  ))}
                </Stack.Item>
              </Stack>
            </Card.Section>
          </Card>

          <Card title="Settings">
            <Card.Section>
              <FormLayout>
                <TextField label="Message" maxHeight={10} />

                <Checkbox label="Show icon on desktop" />

                <Stack vertical spacing="extraTight">
                  <Label>Cookie image</Label>
                  <Stack>
                    <div className="Avada__Settings-DropZone">
                      <DropZone type="image">
                        <DropZone.FileUpload />
                      </DropZone>
                    </div>
                    <div className="Avada__Settings-CookieIcon">
                      <CookieIcon />
                    </div>
                  </Stack>
                </Stack>
              </FormLayout>
            </Card.Section>
          </Card>
        </Layout.Section>

        <Layout.Section secondary>
          <Card
            title="Preview"
            actions={[
              {
                content: (
                  <Stack>
                    <Icon source={DesktopMajor} color="#06038d" />
                    <TextStyle variation="strong">Desktop</TextStyle>
                  </Stack>
                )
              }
            ]}
          >
            <PreviewPhone theme={selected} />
          </Card>
        </Layout.Section>
      </Layout>
    </Page>
  );
}

Settings.propTypes = {};
